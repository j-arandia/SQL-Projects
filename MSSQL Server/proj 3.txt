SELECT FirstName, LastName, 
MAX(CommissionBonus) OVER(PARTITION BY DepartmentID), 
SUM(Salary + CommissionBonus) AS "TotalCompensation", 
FROM dbo.Employees

SUM(Salary + CommissionBonus) AS TotalCompensation
RANK() OVER(ORDER BY CommissionBonus DESC) AS RANK
AVG(CommissionBonus) AS Average Commission

RANK() OVER(PARTITION BY e.DepartmentID ORDER BY e.CommissionBonus DESC) [RANK]


SELECT DepartmentID, FirstName, LastName, CommissionBonus, 
, SUM(Salary + CommissionBonus) [TotalCompensation]
FROM dbo.Employees

----------------------------------------------------------------------------

WITH cteEmployeesByManager(DepartmentID, FirstName, LastName, FileFolder ) AS
(
SELECT DepartmentID, FirstName, LastName, FileFolder
	FROM Employees
	WHERE DepartmentID IS NOT NULL
UNION ALL
SELECT e.DepartmentID, e.FirstName, e.LastName, FileFolder
	FROM Employees e 
	
	
)
SELECT 
FROM cteEmployeesByManager
